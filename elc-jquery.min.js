(function(n){"use strict";function h(n,t,i,r){this.url=n||"http://www.wsdot.wa.gov/geoservices/ArcGIS/rest/services/Shared/ElcRestSOE/MapServer/exts/ElcRestSoe";this.findRouteLocationsOperationName=t||"Find Route Locations";this.findNearestRouteLocationsOperationName=i||"Find Nearest Route Locations";this.routesResourceName=r||"routes";this.layerList=null}function e(n,t){this.name=n;this.lrsTypes=t}function o(n){var t,r,i;for(t in n)if(n.hasOwnProperty(t)){r=[];for(i in n[t])n[t].hasOwnProperty(i)&&r.push(new e(i,n[t][i]));this[t]=r}}function r(n){var i,o,u,s,t,f,e;if(typeof n=="undefined"||n===null)return n;if(typeof n!="object"||!(n instanceof Array))throw new Error("array must be an Array object.");for(e=[],i=0,o=n.length;i<o;i+=1)if(t=n[i],f=null,typeof t=="object"&&t instanceof Array)for(f=r(t),u=0,s=f.length;u<s;u+=1)e.push(f[u]);else e.push(t);return e}function s(n){return typeof n=="object"&&n instanceof Date?[String(n.getActualMonth()),String(n.getDate()),String(n.getFullYear())].join("/"):n||""}function u(n,t){var r,i,u;if(typeof n=="undefined"||n===null||typeof n.length!="number")throw new Error("The array parameter must actually be an Array.");for(r=[],i=0,u=n.length;i<u;i+=1)r.push(new t(n[i]));return r}function f(n){var t=typeof n=="object",i;this.Id=t&&typeof n.Id!="undefined"?n.Id:null;this.Route=t&&typeof n.Route!="undefined"?n.Route:null;this.Decrease=t&&typeof n.Decrease!="undefined"?n.Decrease:null;this.Arm=t&&typeof n.Arm!="undefined"?n.Arm:null;this.Srmp=t&&typeof n.Srmp!="undefined"?n.Srmp:null;this.Back=t&&typeof n.Back!="undefined"?n.Back:null;this.ReferenceDate=t&&typeof n.ReferenceDate!="undefined"?n.ReferenceDate:null;this.ResponseDate=t&&typeof n.ResponseDate!="undefined"?n.ResponseDate:null;this.RealignmentDate=t&&typeof n.RealignmentDate!="undefined"?n.RealignmentDate:null;this.EndArm=t&&typeof n.EndArm!="undefined"?n.EndArm:null;this.EndSrmp=t&&typeof n.EndSrmp!="undefined"?n.EndSrmp:null;this.EndBack=t&&typeof n.EndBack!="undefined"?n.EndBack:null;this.EndReferenceDate=t&&typeof n.EndReferenceDate!="undefined"?n.EndReferenceDate:null;this.EndResponseDate=t&&typeof n.EndResponseDate!="undefined"?n.EndResponseDate:null;this.EndRealignDate=t&&typeof n.EndRealignDate!="undefined"?n.EndRealignDate:null;this.ArmCalcReturnCode=t&&typeof n.ArmCalcReturnCode!="undefined"?n.ArmCalcReturnCode:null;this.ArmCalcEndReturnCode=t&&typeof n.ArmCalcEndReturnCode!="undefined"?n.ArmCalcEndReturnCode:null;this.ArmCalcReturnMessage=t&&typeof n.ArmCalcReturnMessage!="undefined"?n.ArmCalcReturnMessage:null;this.ArmCalcEndReturnMessage=t&&typeof n.ArmCalcEndReturnMessage!="undefined"?n.ArmCalcEndReturnMessage:null;this.LocatingError=t&&typeof n.LocatingError!="undefined"?n.LocatingError:null;this.RouteGeometry=t&&typeof n.RouteGeometry!="undefined"?n.RouteGeometry:null;this.EventPoint=t&&typeof n.EventPoint!="undefined"?n.EventPoint:null;this.Distance=t&&typeof n.Distance!="undefined"?n.Distance:null;this.Angle=t&&typeof n.Angle!="undefined"?n.Angle:null;for(i in this)this.hasOwnProperty(i)&&/Date$/gi.test(i)&&(typeof this[i]=="string"||typeof this[i]=="number")&&(this[i]=new Date(this[i]))}function c(n,t){var i;if((t===null||typeof t=="undefined")&&(t="this"),typeof n!==undefined&&n!==null){if(n=Number(n),isNaN(n))throw new Error(["If",t,"property is provided, it must be a number."].join(" "));i=n}else if(n===null)return null;return i}var t,i;typeof n.wsdot=="undefined"&&(n.wsdot={});n.wsdot.elc={};Date.prototype.getActualMonth=function(){return this.getMonth()+1};t=/^(\d{3})(?:((?:AR)|(?:C[DI])|(?:C[O])|(?:F[DI])|(?:LX)|(?:[PQRS][\dU])|(?:RL)|(?:SP)|(?:TB)|(?:TR)|(?:PR)|(?:F[ST])|(?:ML))([A-Z0-9]{0,6}))?$/i;i=/^([\d\.]+)(B)?$/i;n.wsdot.elc.routeRe=t;n.wsdot.elc.srmpRe=i;n.wsdot.elc.RouteLocator=h;n.wsdot.elc.ROUTE_TYPE_INCREASE=1;n.wsdot.elc.ROUTE_TYPE_DECREASE=2;n.wsdot.elc.ROUTE_TYPE_BOTH=3;n.wsdot.elc.ROUTE_TYPE_RAMP=4;n.wsdot.elc.Route=e;n.wsdot.elc.Route.prototype.isIncrease=function(){return this.lrsTypes===1||this.lrsTypes===3};n.wsdot.elc.Route.prototype.isDecrease=function(){return this.lrsTypes===2||this.lrsTypes===3};n.wsdot.elc.Route.prototype.isBoth=function(){return this.lrsTypes===3};n.wsdot.elc.Route.prototype.isRamp=function(){return this.lrsTypes===4};n.wsdot.elc.RouteList=o;n.wsdot.elc.RouteList.prototype.getYearList=function(){var n,t=[];for(n in this)this.hasOwnProperty(n)&&t.push(n);return t.sort(),t};n.wsdot.elc.RouteLocator.prototype.getMapServiceUrl=function(){return this.url.match(/.+\/MapServer/gi)[0]};n.wsdot.elc.RouteLocator.prototype.getRouteList=function(t,i,r){var u=this,f;if(u.layerList){typeof t=="function"&&t(u.layerList);return}try{f={f:"json"};n.ajax({url:[u.url,u.routesResourceName].join("/"),dataType:r?"json":"jsonp",cache:!0,jsonpCallback:"jsonp",data:f,success:function(n){typeof n.error!="undefined"&&typeof(i==="function")?i(n):(u.layerList=new o(n),t(u.layerList))},error:function(n){typeof(i==="function")&&i(n)}})}catch(e){typeof(i==="function")&&i(e)}};n.wsdot.elc.flattenArray=r;n.wsdot.elc.RouteLocator.dateToRouteLocatorDate=s;n.wsdot.elc.convertObjectsInArray=u;n.wsdot.elc.RouteLocation=f;n.wsdot.elc.RouteLocation.prototype.isLine=function(){return this.EndArm!==null||this.EndSrmp!==null};n.wsdot.elc.RouteLocator.prototype.findRouteLocations=function(t){var o,i,e,s,h,r,c,l;if(o=t.locations,i=t.referenceDate||"",e=t.outSR||null,s=t.lrsYear||null,h=t.successHandler,r=t.errorHandler,c=t.useCors,typeof o=="object"&&o instanceof Array){if(!o.length)throw new Error("locations does not have enough elements.");}else throw new Error("The locations parameter must be an array of RouteLocations with at least one element.");if(typeof i=="object"&&i instanceof Date&&(i=[String(i.getActualMonth()),String(i.getDate()),String(i.getFullYear())].join("/")),typeof e!="undefined"&&e!==null&&typeof e!="number"&&typeof e!="string")throw new Error("Unexpected outSR type.  Must be a WKID (number), WKT (string), or omitted (null or undefined).");if(typeof s!="undefined"&&s!==null&&typeof s!="string")throw new Error("Invalid lrsYear.  Must be either a string or omitted altogether.");if(typeof h!="function")throw new Error("No successHandler was specified.");try{l={f:"json",locations:JSON.stringify(o),outSR:e||undefined,referenceDate:i,lrsYear:s||undefined};n.ajax({url:[this.url,this.findRouteLocationsOperationName].join("/"),dataType:c?"json":"jsonp",cache:!0,jsonpCallback:"jsonp",type:"POST",data:l,success:function(n){typeof n.error!="undefined"&&typeof(r==="function")?r(n):typeof(h==="function")&&h(u(n,f))},error:function(n){typeof(r==="function")&&r(n)}})}catch(a){typeof(r==="function")&&r(a)}};n.wsdot.elc.RouteLocator.prototype.findNearestRouteLocations=function(t){var i={f:"json"};if(typeof t.referenceDate=="undefined"||t.referenceDate===null)throw new Error("referenceDate not provided.");else i.referenceDate=s(t.referenceDate);if(t.coordinates=r(t.coordinates),typeof t.coordinates=="object"&&t.coordinates instanceof Array){if(t.coordinates.length<2||t.coordinates.length%2!=0)throw new Error("The coordinates array must contain at least two elements and consist of an even number of elements.");}else throw new Error("The coordinates parameter must be an array of numbers.");if(i.coordinates=JSON.stringify(t.coordinates),typeof t.searchRadius!="number"||t.searchRadius<=0)throw new Error("searchRadius must be a number that is greater than zero.");else i.searchRadius=t.searchRadius;if(typeof t.inSR!="number"&&typeof t.outSR!="string")throw new Error("Unexpected inSR type.  The inSR value must be either a WKID (number) or a WKT (string).");else i.inSR=t.inSR;if(typeof t.outSR!="undefined"&&t.outSR!==null&&typeof t.outSR!="number"&&typeof t.outSR!="string")throw new Error("Unexpected outSR type.  Must be a WKID (number), WKT (string), or omitted (null or undefined).");else i.outSR=t.outSR;if(typeof t.lrsYear!="undefined"&&t.lrsYear!==null&&typeof t.lrsYear!="string")throw new Error("Invalid lrsYear.  Must be either a string or omitted altogether.");else i.lrsYear=t.lrsYear||undefined;if(i.routeFilter=t.routeFilter||undefined,typeof t.routeFilter!="undefined"&&typeof t.routeFilter!="string")throw new Error("Invalid route filter type.  The routeFilter parameter should be either a string or omitted altogether.");if(typeof t.successHandler!="function")throw new Error("No successHandler was specified.");try{n.ajax({url:[this.url,this.findNearestRouteLocationsOperationName].join("/"),dataType:t.useCors?"json":"jsonp",type:"POST",data:i,cache:!0,jsonpCallback:"jsonp",success:function(n){typeof n.error!="undefined"?typeof t.errorHandler=="function"&&t.errorHandler(n.error):t.successHandler(u(n,f))},error:function(n){typeof t.errorHandler=="function"&&t.errorHandler(n)}})}catch(e){typeof t.errorHandler=="function"&&t.errorHandler(e)}};n.wsdot.elc.RouteLocation.prototype.toJSON=function(){var r,n,f,u,e,o,s,h;u={};e=/(?:Id)|(?:(?:End)?Arm)|(ReturnCode)|(Distance)|(Angle)/gi;o=/Srmp$/gi;h=/(?:Decrease)|(Back)$/gi;s=/Date$/gi;for(r in this)if(this.hasOwnProperty(r))if(n=this[r],e.test(r))n!==null&&(u[r]=c(n,r));else if(o.test(r)){if(typeof n=="number")u[r]=n;else if(typeof n=="string")if(f=i.exec(n),f)u[r]=Number(f[1]),f[2]&&(/End$/.test(r)?u.EndBack=!0:r==="Srmp"&&(u.Back=!0));else throw new Error(["Invalid",r,"value:",String(n)].join(" "));}else if(r==="Route"){if(typeof n=="string")if(f=t.exec(this[r]),f)u.Route=f[0];else throw new Error("Route is invalidly formatted.");else if(n!==null)throw new Error("Route must be a string.");}else h.test(r)?u.Decrease=n===null?null:Boolean(n):s.test(r)&&Boolean(n)?n instanceof Date&&(u[r]=[String(n.getActualMonth()),String(n.getDate()),String(n.getFullYear())].join("/")):n!==null&&(u[r]=n);return u}})(jQuery);
/*
//# sourceMappingURL=elc-jquery.min.js.map
*/